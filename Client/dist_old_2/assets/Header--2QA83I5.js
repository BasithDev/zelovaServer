import{P as b,a as v,b8 as N,r as i,bf as I,j as e,aj as E,E as g,m as l,bg as k}from"./index-C0g0oOAM.js";const w=({onClose:d})=>{var r;const m=v(),{cart:n}=N(),t=(r=n==null?void 0:n.data)==null?void 0:r.cart,x=()=>t!=null&&t.items?t.totalPrice:0;return!t||!t.items||t.items.length===0?e.jsx(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50",onMouseLeave:d,children:e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Your cart is empty"})}):e.jsx(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50",onMouseLeave:d,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[e.jsx("img",{src:t.restaurantId.image,alt:t.restaurantId.name,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:t.restaurantId.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-[250px]",children:t.restaurantId.address})]})]}),e.jsx("div",{className:"mt-4 space-y-3 max-h-60 overflow-y-auto",children:t.items.map(a=>{var c;return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:a.item.name}),((c=a.selectedCustomizations)==null?void 0:c.length)>0&&e.jsx("p",{className:"text-sm text-gray-500",children:a.selectedCustomizations.map(o=>`${o.fieldName}: ${o.options.name}`).join(", ")}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["₹",a.itemPrice," × ",a.quantity]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["₹",a.itemPrice*a.quantity]})]})]})},a._id)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between font-medium text-gray-900",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["₹",x()]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: Prices may vary after offers and taxes"}),e.jsx("button",{onClick:()=>m("/cart"),className:"mt-4 w-full bg-orange-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"View Cart"})]})]})})};w.propTypes={onClose:b.func.isRequired};const z=({placeholderText:d="Search..."})=>{var y;const m=v(),{totalItems:n}=N(),[t,x]=i.useState(!1),[r,a]=i.useState(""),[c,o]=i.useState([]),[C,u]=i.useState(!1),h=i.useRef(null),f=((y=n==null?void 0:n.data)==null?void 0:y.totalItems)||0;i.useEffect(()=>(h.current&&clearTimeout(h.current),h.current=setTimeout(async()=>{if(r)try{const s=await I(r);o(s.data.foodItems),u(!0)}catch(s){console.error("Error fetching search results:",s),o([])}else o([]),u(!1)},500),()=>clearTimeout(h.current)),[r]),i.useEffect(()=>{const s=p=>{p.target.closest(".search-container")||u(!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const S=s=>{u(!1),a(""),m(`/restaurant/${s.restaurantId._id}/menu`,{state:{foodCategory:s.foodCategory.name}})};return e.jsx("div",{className:"sticky top-0 z-40 bg-white transition-all duration-300 border-b",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between h-[60px]",children:[e.jsx("div",{className:"flex-1 max-w-3xl",children:e.jsxs("div",{className:"relative search-container",children:[e.jsx("input",{type:"text",value:r,onChange:s=>a(s.target.value),placeholder:d,className:"w-full pl-10 pr-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 placeholder-gray-400"}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx(E,{size:16})}),e.jsx(g,{children:C&&e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.1},className:"absolute w-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 max-h-[80vh] sm:max-h-96 overflow-y-auto z-50 scrollbar-hide",children:e.jsx(g,{children:c.length>0?c.map(s=>{var p,j;return e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-100},transition:{duration:.2},onClick:()=>S(s),className:"flex items-center p-2 sm:p-3 transition-all duration-200 cursor-pointer border-b border-gray-100 last:border-b-0 hover:bg-orange-50 hover:shadow-lg",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg overflow-hidden mr-2 sm:mr-3",children:e.jsx(g,{children:e.jsx(l.img,{initial:{scale:.8},animate:{scale:1},src:s.image,alt:s.name,className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-800 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-orange-500 truncate",children:["From: ",e.jsxs("span",{className:"text-gray-500 font-semibold",children:[(p=s.restaurantId)==null?void 0:p.name,e.jsx("span",{className:"hidden sm:inline text-gray-400 ms-1 font-normal",children:(j=s.restaurantId)==null?void 0:j.address})]})]}),e.jsxs(l.span,{className:"text-sm font-medium text-orange-500 ml-2 whitespace-nowrap",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:["₹",s.price]})]})]})]},s._id)}):e.jsx("div",{className:"p-3 text-center text-gray-500 text-sm sm:text-base",children:`No results found for "${r}"`})})})})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onMouseEnter:()=>x(!0),onClick:()=>m("/cart"),className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 bg-orange-50 hover:bg-orange-100 rounded-full transition-all duration-300 group",children:[e.jsx(k,{className:"text-orange-500 group-hover:text-orange-600 transition-colors",size:18}),f>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-orange-500 text-white text-[10px] sm:text-xs font-bold rounded-full flex items-center justify-center",children:f})]}),e.jsx(g,{children:t&&e.jsx(w,{onClose:()=>x(!1)})})]})]})})})};z.propTypes={placeholderText:b.string};export{z as H};
