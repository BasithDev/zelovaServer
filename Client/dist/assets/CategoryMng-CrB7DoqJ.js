import{r as i,j as e,Q as O,m as o,E as S,U as B,V as I,W as V,B as P,X as Q}from"./index-_sbS5Ts6.js";import{A as R}from"./AdminSearchBar-DD_5Ln9m.js";const X=()=>{const[b,m]=i.useState([]),[p,j]=i.useState([]),[C,k]=i.useState(""),[f,D]=i.useState(""),[s,d]=i.useState(1),[r,g]=i.useState(1),[n,_]=i.useState(5),N={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1},exit:{opacity:0,x:-50}};i.useEffect(()=>{(async()=>{try{const a=await B(),F=await I();m(a.data.data||[]),j(F.data.data||[])}catch(a){console.log(a)}})()},[]);const $=async t=>{try{await V(t),m(b.filter(a=>a._id!==t)),P.success("Category deleted successfully!")}catch(a){console.log(a)}},A=async t=>{try{await Q(t),j(p.filter(a=>a._id!==t)),P.success("Subcategory deleted successfully!")}catch(a){console.log(a)}},u=b.filter(t=>t.name.toLowerCase().includes(C.toLowerCase())),x=p.filter(t=>t.name.toLowerCase().includes(f.toLowerCase())),v=s*n,L=v-n,M=u.slice(L,v),l=Math.ceil(u.length/n),w=r*n,T=w-n,E=x.slice(T,w),c=Math.ceil(x.length/n),y=t=>d(t),h=t=>g(t);return e.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[e.jsx(O,{position:"top-right",autoClose:2e3}),e.jsx(R,{}),e.jsx(o.h1,{initial:{opacity:.5},animate:{opacity:1},transition:{duration:1},className:"text-4xl font-bold mb-8 text-center text-gray-800",children:"Category Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 p-5",children:[e.jsxs(o.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{opacity:{duration:.5},y:{type:"spring",stiffness:100,damping:20}},className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Categories"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:n,onChange:t=>{_(Number(t.target.value)),d(1),g(1)},className:"p-2 border border-gray-300 rounded-lg outline-none",children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"})]}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:C,onChange:t=>{k(t.target.value),d(1)},className:"p-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 transition"})]})]}),e.jsx(S,{children:u.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"divide-y divide-gray-200",children:M.map(t=>e.jsxs(o.li,{variants:N,initial:"hidden",animate:"visible",exit:"exit",className:"flex justify-between items-center py-3",children:[e.jsx("span",{className:"text-gray-700 text-lg",children:t.name}),e.jsx("button",{onClick:()=>$(t._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg transition",children:"Delete"})]},t._id))}),l>1&&e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>y(s-1),disabled:s===1,className:`px-3 py-1 rounded ${s===1?"bg-gray-200 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),[...Array(l)].map((t,a)=>e.jsx("button",{onClick:()=>y(a+1),className:`px-3 py-1 rounded ${s===a+1?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:a+1},a+1)),e.jsx("button",{onClick:()=>y(s+1),disabled:s===l,className:`px-3 py-1 rounded ${s===l?"bg-gray-200 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Next"})]})]}):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"No categories found."})})]}),e.jsxs(o.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{opacity:{duration:.5},y:{type:"spring",stiffness:100,damping:20}},className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Sub-Categories"}),e.jsx("input",{type:"text",placeholder:"Search sub-categories...",value:f,onChange:t=>{D(t.target.value),g(1)},className:"p-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 transition"})]}),e.jsx(S,{children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"divide-y divide-gray-200",children:E.map(t=>e.jsxs(o.li,{variants:N,initial:"hidden",animate:"visible",exit:"exit",className:"flex justify-between items-center py-3",children:[e.jsxs("span",{className:"text-gray-700 text-lg",children:[`${t.name} - `," ",e.jsx("span",{className:"text-gray-500",children:`${t.categoryName}`})]}),e.jsx("button",{onClick:()=>A(t._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg transition",children:"Delete"})]},t._id))}),c>1&&e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>h(r-1),disabled:r===1,className:`px-3 py-1 rounded ${r===1?"bg-gray-200 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),[...Array(c)].map((t,a)=>e.jsx("button",{onClick:()=>h(a+1),className:`px-3 py-1 rounded ${r===a+1?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:a+1},a+1)),e.jsx("button",{onClick:()=>h(r+1),disabled:r===c,className:`px-3 py-1 rounded ${r===c?"bg-gray-200 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Next"})]})]}):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"No subcategories found."})})]})]})]})};export{X as default};
