import{G as k,r as i,o as S,p as T,j as e,m as l,q as P,t as L,w as O,x as I,y as H,z}from"./index-CYBSKVP3.js";import{T as E}from"./index-D3hipTqZ.js";import{A as U}from"./index-B6PFVwOa.js";import{A as F}from"./AdminSearchBar-Hz-xpf93.js";import{A as G}from"./AnalyticsDashboard-CDECgNdJ.js";import"./debounce-C82Wjq1q.js";function _(t){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M18.78 19.5v79.656c44.684 5.582 81.517 24.966 116.657 47.156l-24.75 20.063L212.47 218.28 184.53 106.5l-25.905 21c-20.225-40.01-42.778-77.73-72.75-108H18.78zm277.376 0c-15.624 28.765-29.207 58.126-41.78 88.156l-30.19-6.406 25.94 112.25 67.06-92.5-29.592-6.28c33.29-34.747 67.597-67.793 108.062-95.22h-99.5zm197.5 93.844c-37.988 2.482-72.04 19.677-105.03 40.906l-12.47-32.53-80.062 82.843 114.094 5.937-13.25-34.563c32.24-.934 64.478 1.827 96.718 21.375v-83.968zm-194.03 128.03c-5.28.12-10.21 2.416-16.938 9.595l-6.563 6.968-6.813-6.72c-7.387-7.28-13.216-9.29-19.125-9.03-5.908.26-12.855 3.367-20.625 9.656l-6.218 5.03-5.906-5.374c-8.9-8.052-16.485-10.438-23.75-10.063-5.288.274-10.775 2.266-16.25 5.75l40.968 73.688c15.454 9.452 47.033 13.007 68.75 2.063l39.594-73.344c-7.51-3.062-14.26-6.202-20.094-7.406-2.112-.437-4.072-.756-5.97-.813-.354-.01-.71-.008-1.06 0zm-89.97 96.19c-18.035 12.742-32.516 34.718-38.125 66.905-5.435 31.196 3.128 52.265 18.282 66.624 15.155 14.36 37.902 21.737 61 21.437 23.1-.3 46.136-8.31 61.625-22.936 15.49-14.627 24.25-35.426 19.282-65.188-5.137-30.757-18.4-52.148-35.19-65.094-28.482 15.056-64.094 11.856-86.874-1.75z"},child:[]}]})(t)}const q=()=>{const[t,N]=i.useState([]),[u,d]=i.useState([]),[o,y]=i.useState(1),[n,b]=i.useState(""),x=5,m=i.useCallback(async()=>{try{const s=await S();d(s.data)}catch(s){console.error(s)}},[]),h=i.useCallback(async()=>{try{const s=await T();N(s.data)}catch(s){console.error(s)}},[]);i.useEffect(()=>{m(),h()},[m,h]);const f={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},w=async s=>{try{await z(s),d(a=>a.map(r=>r._id===s?{...r,isActive:!r.isActive}:r))}catch(a){console.error("Error toggling restaurant status:",a)}},p=o*x,R=p-x,g=u.filter(s=>s.name.toLowerCase().includes(n.toLowerCase())||s.vendorId.fullname.toLowerCase().includes(n.toLowerCase())||s.address.toLowerCase().includes(n.toLowerCase())),j=g.slice(R,p),A=Math.ceil(g.length/x),C=s=>{y(s)};return e.jsxs(l.div,{initial:"hidden",animate:"visible",variants:f,className:"min-h-screen bg-gray-50 pb-8",children:[e.jsx(F,{}),e.jsx(l.h1,{variants:c,className:"text-3xl px-6 font-bold mb-8 pt-6",children:"Dashboard Overview"}),e.jsxs(l.div,{variants:c,className:"grid px-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[e.jsx(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(P,{className:"text-3xl text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:t==null?void 0:t.totalUsers}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Accounts"})]})]})}),e.jsx(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(L,{className:"text-3xl text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Restaurants"}),e.jsx("p",{className:"text-2xl font-bold",children:t==null?void 0:t.totalRestaurants}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Restaurants"})]})]})}),e.jsx(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(E,{className:"text-3xl text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:t==null?void 0:t.totalOrders}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Completed Orders"})]})]})}),e.jsx(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(U,{className:"text-3xl text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Sales"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",t==null?void 0:t.totalSales]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Revenue Generated"})]})]})}),e.jsx(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-white p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(_,{className:"text-3xl text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Profit"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",t==null?void 0:t.totalProfit]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Net Earnings"})]})]})})]}),e.jsx(G,{fetchReports:O,exportReportToPDF:I,exportReportToExcel:H}),e.jsxs(l.div,{variants:c,className:"bg-white p-6 mx-6 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Restaurants"}),e.jsx("input",{type:"text",placeholder:"Search...",value:n,onChange:s=>b(s.target.value),className:"bg-gray-100 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left",children:"Restaurant"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Owner Details"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Contact"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Timings"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Rating"}),e.jsx("th",{className:"py-3 px-4 text-left",children:"Status"})]})}),e.jsx("tbody",{children:j.length>0?j.map(s=>{var a,r,v;return e.jsxs(l.tr,{variants:c,className:"border-t hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium block",children:s.name}),e.jsx("span",{className:"text-sm text-gray-500",children:s.address})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium block",children:(a=s.vendorId)==null?void 0:a.fullname}),e.jsx("span",{className:"text-sm text-gray-500",children:(r=s.vendorId)==null?void 0:r.email})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsxs("span",{className:"block",children:["Restaurant: ",s.phone]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Owner : ",(v=s.vendorId)==null?void 0:v.phoneNumber]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-sm",children:[s.openingTime," - ",s.closingTime]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-yellow-500 mr-1",children:"★"}),e.jsx("span",{children:s.avgRating.toFixed(1)}),e.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["(",s.totalRatingCount,")"]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`${s.isActive?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"} text-white px-4 py-1.5 rounded-lg text-sm transition-colors`,onClick:()=>w(s._id),children:s.isActive?"Active":"Inactive"})})]},s._id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-4",children:"No restaurants found matching your search."})})})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:Array.from({length:A},(s,a)=>e.jsx("button",{onClick:()=>C(a+1),className:`px-3 py-1 mx-1 rounded ${o===a+1?"bg-blue-500 text-white":"bg-gray-200"}`,children:a+1},a))})]})]})};export{q as default};
