import{a as R,r as l,ai as k,as as S,j as a,m as i,at as F}from"./index-CYBSKVP3.js";import{H as O}from"./Header-DkfEPGxm.js";import{R as C,c as D}from"./distanceUtils-DKN7c-xv.js";const $=()=>{const f=R(),[m,x]=l.useState([]),[u,p]=l.useState(!1),[r,y]=l.useState("nearest"),[o,g]=l.useState(!1),v=k(e=>e==null?void 0:e.userLocation),{lat:c,lng:d}=v.coordinates||{},[b,j]=l.useState(""),h=l.useCallback(async()=>{const e=await S(c,d);if(e!=null&&e.data){const s=[...e.data].sort((t,n)=>t.distance-n.distance);x(s),p(!0)}},[c,d]);l.useEffect(()=>{c!==void 0&&d!==void 0&&h()},[c,d,h]);const N=e=>{f(`restaurant/${e}/menu`)},w=e=>{y(e);let s=[...m];switch(e){case"nearest":s.sort((t,n)=>t.distance-n.distance);break;case"farthest":s.sort((t,n)=>n.distance-t.distance);break;case"offers":s=s.filter(t=>t.offerName);break;case"rating":s.sort((t,n)=>n.avgRating-t.avgRating);break}x(s)};return a.jsxs("div",{className:"p-1",children:[a.jsx(O,{searchQuery:b,onSearchChange:e=>j(e.target.value),placeholderText:"Search foods, restaurants, etc..."}),a.jsx("div",{className:"p-6",children:u?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6 px-4 sm:px-0",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4 text-gray-900",children:"Restaurants Near You"}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("div",{className:"relative w-48",children:[a.jsxs("button",{onClick:()=>g(!o),className:"flex items-center gap-2 bg-white border border-gray-200 px-4 py-2 rounded-lg shadow-sm w-full",children:[a.jsx("span",{className:"text-gray-700",children:"Sort By: "}),a.jsx("span",{className:"font-medium text-orange-500",children:r==="none"?"Select Option":r==="nearest"?"Nearest":r==="farthest"?"Farthest":r==="offers"?"Offers Only":r==="rating"?"Rating":""}),a.jsx("svg",{className:`w-5 h-5 transition-transform ml-auto ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),a.jsx(i.div,{initial:{opacity:0,y:-20},animate:{opacity:o?1:0,y:o?0:-20,display:o?"block":"none"},transition:{duration:.1},className:"absolute right-0 top-full mt-2 w-full bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden z-50",children:a.jsx("div",{className:"py-1",children:[{value:"nearest",label:"Nearest"},{value:"farthest",label:"Farthest"},{value:"offers",label:"Offers Only"},{value:"rating",label:"Rating"}].map(e=>a.jsx("button",{onClick:()=>{w(e.value),g(!1)},className:`w-full text-left px-4 py-2.5 text-sm transition-colors duration-150 ${r===e.value?"text-orange-500 bg-orange-50 font-medium":"text-gray-700 hover:bg-orange-50"}`,children:e.label},e.value))})})]})})]}),a.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-4 sm:px-0",children:m.length===0?a.jsxs("div",{className:"col-span-full flex flex-col justify-center items-center p-8",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Restaurants Found"}),a.jsx("p",{className:"text-gray-600 text-center",children:"Sorry, our service is currently unavailable in your area. We're working on expanding our reach!"})]}):m.map(e=>{const{distanceInKm:s,timeInMinutes:t}=D(e.distance);return a.jsxs(i.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.1},className:"bg-white w-full sm:w-[90%] rounded-lg shadow-md overflow-hidden hover:shadow-2xl hover:scale-[1.01] hover:bg-orange-50 transform transition-all duration-300 cursor-pointer",onClick:()=>N(e._id),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:e.image,alt:e.name,className:"w-full h-48 sm:h-56 lg:h-64 object-cover"}),e.offerName&&a.jsx("div",{className:"absolute bottom-2 left-2 bg-blue-500 text-white text-sm sm:text-md font-semibold px-3 py-1 rounded-md shadow-md",children:e.offerName})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-1",children:e.name}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsxs("div",{className:`flex items-center px-2 py-1 rounded-md ${e!=null&&e.avgRating?e.avgRating>=3.5?"bg-green-600":"bg-orange-500":"bg-red-500"}`,children:[a.jsx(F,{className:"text-yellow-400 text-sm mr-1"}),a.jsx("span",{className:"text-sm font-bold text-white",children:e!=null&&e.avgRating?Number(e.avgRating).toFixed(1):"Not Rated Yet"})]}),a.jsxs("span",{className:"ml-3 text-xs sm:text-sm font-medium text-gray-600",children:[s," Km â€¢ ",t," Mins"]})]}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.address})]})]},e._id)})})]}):a.jsxs(i.div,{className:"flex flex-col items-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[a.jsx(i.div,{animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:a.jsx(C,{size:50,color:"#FF5733"})}),a.jsxs(i.div,{className:"flex flex-col items-center gap-2 mt-6",initial:{y:20},animate:{y:0},transition:{duration:.5,delay:.2},children:[a.jsx(i.p,{className:"text-xl font-semibold text-gray-800",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Finding Restaurants Nearby"}),a.jsx(i.div,{className:"flex gap-1",children:[0,1,2].map(e=>a.jsx(i.span,{className:"w-2 h-2 bg-orange-500 rounded-full",animate:{y:["0%","-50%","0%"],opacity:[1,.5,1]},transition:{duration:.8,repeat:1/0,delay:e*.2}},e))})]})]})})]})};export{$ as default};
