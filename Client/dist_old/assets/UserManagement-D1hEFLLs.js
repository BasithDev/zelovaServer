import{r as l,j as e,Q as S,m as c,q as A,R as E,E as I,N as _,O as B,B as L}from"./index-Ch9wd4yu.js";import{T as M}from"./index-IP0dCtA8.js";import{A as O}from"./AdminSearchBar-DtG-tWXB.js";const F=()=>{const[r,h]=l.useState([]),[u,m]=l.useState(!0),[y,N]=l.useState(!1),[a,g]=l.useState(1),[i,f]=l.useState(10);l.useEffect(()=>{(async()=>{try{const{data:t}=await _();h(t),m(!1)}catch(t){console.log(t),N(!0),m(!1)}})()},[]);const v=async(s,t)=>{const b=t==="blocked"?"active":"blocked";try{const d=await B(s,{status:b});h(C=>C.map(x=>x._id===s?{...x,status:b}:x)),L.success(d.data.message)}catch(d){console.log(d)}},[p,w]=l.useState(null),U=s=>{w(p===s?null:s)},j=a*i,k=j-i,P=r.slice(k,j),n=Math.ceil(r.length/i),o=s=>g(s);return e.jsxs("div",{children:[e.jsx(S,{position:"top-right",autoClose:2e3}),e.jsx(O,{}),e.jsx(c.h1,{initial:{opacity:.5},animate:{opacity:1},transition:{duration:1},className:"text-4xl px-3 text-center font-bold mb-8",children:"User Management"}),e.jsxs(c.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{opacity:{duration:.5},y:{type:"spring",stiffness:100,damping:20}},className:"grid px-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[e.jsxs("div",{className:"flex items-center p-6 bg-gray-50 rounded-lg shadow-md hover:bg-white hover:shadow-lg transform transition duration-300",children:[e.jsx(A,{className:"text-4xl text-purple-500 mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:r?r.length:0})]})]}),e.jsxs("div",{className:"flex items-center p-6 bg-gray-50 rounded-lg shadow-md hover:bg-white hover:shadow-lg transform transition duration-300",children:[e.jsx(M,{className:"text-4xl text-yellow-500 mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{opacity:{duration:.5},y:{type:"spring",stiffness:100,damping:20}},className:"bg-white p-6 mx-3 rounded-lg shadow",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Users"}),u?e.jsx("p",{children:"Loading users..."}):y?e.jsx("p",{children:"Error loading users. Please try again later."}):r&&r.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("select",{className:"border rounded p-1",value:i,onChange:s=>{f(Number(s.target.value)),g(1)},children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",a," of ",n]})]}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-left text-gray-600",children:[e.jsx("th",{className:"py-3 px-4",children:"User Name"}),e.jsx("th",{className:"py-3 px-4",children:"Mail ID"}),e.jsx("th",{className:"py-3 px-4",children:"Z Coins"}),e.jsx("th",{className:"py-3 px-4",children:"Block/Unblock"}),e.jsx("th",{className:"py-3 px-4",children:"User Profile"})]})}),e.jsx("tbody",{children:P.map(s=>e.jsxs(E.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:s.fullname}),e.jsx("td",{className:"py-3 px-4",children:s.email}),e.jsx("td",{className:"py-3 px-4",children:s.zCoins}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>v(s._id,s.status),className:`${s.status==="blocked"?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"} text-white px-3 py-1 rounded-md transition`,children:s.status==="blocked"?"Unblock":"Block"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>U(s._id),className:"bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600 transition",children:"View"})})]}),e.jsx(I,{children:p===s._id&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-4 bg-gray-100",children:e.jsx(c.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 rounded-lg bg-white shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[s.profilePicture?e.jsx("img",{src:s.profilePicture,alt:"Profile",className:"w-16 h-16 rounded-full mr-4"}):e.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full mr-4 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"N/A"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:s.fullname}),e.jsx("p",{className:"text-gray-500",children:s.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Age:"})," ",s.age||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",s.phoneNumber||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",s.status||"N/A"]})]})]})})})})})]},s._id))})]}),e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>o(a-1),disabled:a===1,className:`px-3 py-1 rounded ${a===1?"bg-gray-200 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),[...Array(n)].map((s,t)=>e.jsx("button",{onClick:()=>o(t+1),className:`px-3 py-1 rounded ${a===t+1?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:t+1},t+1)),e.jsx("button",{onClick:()=>o(a+1),disabled:a===n,className:`px-3 py-1 rounded ${a===n?"bg-gray-200 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Next"})]})]}):e.jsx("p",{children:"No users available."})]})]})};export{F as default};
