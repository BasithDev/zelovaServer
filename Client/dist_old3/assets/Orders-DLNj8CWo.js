import{r as i,C as k,A as T,j as e,E as o,m as t,P as m,aK as R,aL as I,aM as p,aN as Q}from"./index-_sbS5Ts6.js";import{H as A}from"./Header-AxxLmcqz.js";import{D as F,O as h}from"./OrderCard-C2AZGilJ.js";const f=()=>{const[g,j]=i.useState(""),[c,v]=i.useState(new Date),[a,y]=i.useState("current"),[b,d]=i.useState(!1),[N,x]=i.useState(null),[n,w]=i.useState([]),O=k(),u=async s=>{try{await R({orderId:N,status:s?"ORDER ACCEPTED":"NOT RECEIVED BY CUSTOMER"}),await O.invalidateQueries(["currentOrders"]),d(!1),x(null)}catch(r){console.error("Error updating order status:",r)}},S=async s=>{try{const r=await I(s.toISOString());w(r.data.orders||[])}catch(r){console.error("Error fetching orders:",r)}};i.useEffect(()=>{a==="previous"&&S(c)},[a,c]);const{data:l,isLoading:C,isError:P}=T({queryKey:["currentOrders"],queryFn:Q,refetchInterval:5e3,select:s=>s.data}),D=()=>{var s;return C?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your orders..."})]}):P?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("div",{className:"bg-red-100 p-4 rounded-lg",children:e.jsx("p",{className:"text-red-600",children:"Failed to load orders. Please try again later."})})}):a==="current"&&!((s=l==null?void 0:l.orders)!=null&&s.length)?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-gray-100 p-8 rounded-lg flex flex-col items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Orders Found Currently."}),e.jsx("p",{className:"text-gray-600",children:"You haven't placed any orders."}),e.jsx(p,{className:"text-6xl text-gray-300 mt-4"})]})}):e.jsx("div",{className:"space-y-6",children:e.jsx(o,{children:a==="current"?l.orders.map(r=>e.jsx(h,{order:r,setShowDeliveryPopup:d,setSelectedOrderId:x,isPreviousOrder:!1,fromSeller:!1},r.orderId)):Array.isArray(n)&&n.length>0?n.map(r=>e.jsx(h,{order:r,setShowDeliveryPopup:d,setSelectedOrderId:x,isPreviousOrder:!0,fromSeller:!1},r._id)):e.jsx(o,{children:a==="previous"&&n.length===0&&e.jsx(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex flex-col items-center justify-center py-12",children:e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-gray-100 p-8 rounded-lg flex flex-col items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Previous Orders"}),e.jsx("p",{className:"text-gray-600",children:"You haven't placed any orders on this date."}),e.jsx(p,{className:"text-6xl text-gray-300 mt-4"})]})})})})})},E={selected:c,onChange:s=>v(s),maxDate:new Date,dateFormat:"yyyy/MM/dd",className:"w-full p-2 border border-gray-300 rounded-lg"};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(A,{searchQuery:g,onSearchChange:s=>j(s.target.value),placeholderText:"Search foods, restaurants, etc..."}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Your Orders"}),e.jsxs("div",{className:"inline-flex rounded-lg p-1 bg-gray-100 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>y("current"),className:`flex-1 sm:flex-none px-4 sm:px-6 py-2 rounded-lg text-sm font-medium transition-all ${a==="current"?"bg-white text-gray-800 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Current Orders"}),e.jsx("button",{onClick:()=>y("previous"),className:`flex-1 sm:flex-none px-4 sm:px-6 py-2 rounded-lg text-sm font-medium transition-all ${a==="previous"?"bg-white text-gray-800 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Previous Orders"})]})]}),e.jsx(o,{children:a==="previous"&&e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"mb-8",children:[e.jsx("label",{className:"block text-gray-700 text-sm sm:text-base mb-2",children:"Select Date:"}),e.jsx("div",{className:"max-w-xs",children:e.jsx(F,{...E})})]})}),D(),e.jsx(o,{children:b&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx(t.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",duration:.5},className:"bg-white rounded-2xl p-6 sm:p-8 w-[90%] sm:w-[400px] shadow-xl",children:e.jsxs(t.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"flex flex-col items-center text-center",children:[e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.3},className:"mb-4 p-3 rounded-full bg-blue-100",children:e.jsx("svg",{className:"w-6 sm:w-8 h-6 sm:h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(t.h3,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:"Delivery Confirmation"}),e.jsx(t.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-sm sm:text-base text-gray-600 mb-6",children:"Has your order been delivered to you?"}),e.jsxs(t.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-3 w-full",children:[e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!1),className:"px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base text-white bg-red-600 rounded-xl font-medium hover:bg-red-700 transition-colors",children:"No, Not Received"}),e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!0),className:"px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors",children:"Yes, Received"})]})]})})})})]})]})};f.propTypes={searchQuery:m.string,onSearchChange:m.func,placeholderText:m.string};f.defaultProps={searchQuery:"",onSearchChange:()=>{},placeholderText:"Search foods, restaurants, etc..."};export{f as default};
